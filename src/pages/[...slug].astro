---
import { getCollection, render } from 'astro:content';
import BlogPost from '../layouts/BlogPost.astro';

export async function getStaticPaths() {
    const posts = await getCollection('blog');
    
    // DEBUG
    console.log('üìÅ Total posts found:', posts.length);
    console.log('üìÅ All post IDs:', posts.map(p => p.id));
    
    return posts.map((post) => {
        const slug = post.id;
        
        return {
            params: { slug },
            props: { post },
        };
    });
}

const { post } = Astro.props;
console.log('üîç SLUG PAGE - post.data:', JSON.stringify(post.data, null, 2));
const { Content } = await render(post);

const lang = post.id.split('/')[0];
---

<BlogPost {...post.data} lang={lang}>
    <Content />
</BlogPost>
